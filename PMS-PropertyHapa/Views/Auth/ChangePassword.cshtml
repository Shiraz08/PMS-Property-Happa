@model PMS_PropertyHapa.Models.DTO.ChangePasswordRequestDto

@{
    ViewData["Title"] = "Change Password";
    Layout = "~/Views/Shared/_Layout.cshtml"; 
}

<script>
    $(document).ready(function () {
        $("#changePasswordForm").submit(function (event) {
            event.preventDefault();

            var currentPassword = $("#currentPassword").val();
            var newPassword = $("#newPassword").val();
            var confirmPassword = $("#confirmPassword").val();

          
            if (newPassword !== confirmPassword) {
                alert("New password and confirmation password do not match.");
                return;
            }

            var data = {
                userId: "@User.Identity.Name", 
                currentPassword: currentPassword,
                newPassword: newPassword
            };

            $.ajax({
                url: "https://localhost:7178/api/v1/UsersAuth/change-password",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(data),
                success: function (response) {
                    alert(response.result);
                 
                },
                error: function (xhr, status, error) {
                    alert("An error occurred: " + xhr.responseText);
                }
            });
        });
    });
</script>

<div class="theme-form needs-validation" method="post">
    <h2>Change Password</h2>
    <form id="changePasswordForm">
        <div class="form-group">
            <label for="currentPassword">Current Password:</label>
            <input type="password" class="form-control" id="currentPassword" name="currentPassword" required>
        </div>
        <div class="form-group">
            <label for="newPassword">New Password:</label>
            <input type="password" class="form-control" id="newPassword" name="newPassword" required>
        </div>
        <div class="form-group">
            <label for="confirmPassword">Confirm New Password:</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
        </div>
        <button type="submit" class="btn btn-primary">Change Password</button>
    </form>
</div>